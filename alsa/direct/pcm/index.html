<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module bypasses alsa-lib and directly read and write into memory mapped kernel memory. In case of the sample memory, this is in many cases the DMA buffers that is transferred to the sound card."><meta name="keywords" content="rust, rustlang, rust-lang, pcm"><title>alsa::direct::pcm - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../alsa/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module pcm</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="pcm" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">alsa</a>::<wbr><a href="../index.html">direct</a>::<wbr><a class="mod" href="#">pcm</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/alsa/direct/pcm.rs.html#1-630" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module bypasses alsa-lib and directly read and write into memory mapped kernel memory.
In case of the sample memory, this is in many cases the DMA buffers that is transferred to the sound card.</p>
<p>The reasons for doing this are:</p>
<ul>
<li>Minimum overhead where it matters most: let alsa-lib do the code heavy setup -
then steal its file descriptor and deal with sample streaming from Rust.</li>
<li>RT-safety to the maximum extent possible. Creating/dropping any of these structs causes syscalls,
but function calls on these are just read and write from memory. No syscalls, no memory allocations,
not even loops (with the exception of <code>MmapPlayback::write</code> that loops over samples to write).</li>
<li>Possibility to allow Send + Sync for structs</li>
<li>It’s a fun experiment and an interesting deep dive into how alsa-lib does things.</li>
</ul>
<p>Note: Not all sound card drivers support this direct method of communication; although almost all
modern/common ones do. It only works with hardware devices though (such as “hw:xxx” device strings),
don’t expect it to work with, e g, the PulseAudio plugin or so.</p>
<p>For an example of how to use this mode, look in the “synth-example” directory.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Capture.html" title="alsa::direct::pcm::Capture struct">Capture</a></div><div class="item-right docblock-short"><p>Dummy struct for better generics</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CaptureIter.html" title="alsa::direct::pcm::CaptureIter struct">CaptureIter</a></div><div class="item-right docblock-short"><p>Iterator over captured samples</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Control.html" title="alsa::direct::pcm::Control struct">Control</a></div><div class="item-right docblock-short"><p>Write PCM appl ptr directly, bypassing alsa-lib.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MmapIO.html" title="alsa::direct::pcm::MmapIO struct">MmapIO</a></div><div class="item-right docblock-short"><p>Struct containing direct I/O functions shared between playback and capture.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Playback.html" title="alsa::direct::pcm::Playback struct">Playback</a></div><div class="item-right docblock-short"><p>Dummy struct for better generics</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.RawSamples.html" title="alsa::direct::pcm::RawSamples struct">RawSamples</a></div><div class="item-right docblock-short"><p>A raw pointer to samples, and the amount of samples readable or writable.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Status.html" title="alsa::direct::pcm::Status struct">Status</a></div><div class="item-right docblock-short"><p>Read PCM status directly from memory, bypassing alsa-lib.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SyncPtrStatus.html" title="alsa::direct::pcm::SyncPtrStatus struct">SyncPtrStatus</a></div><div class="item-right docblock-short"><p>Read PCM status via a simple kernel syscall, bypassing alsa-lib.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.MmapDir.html" title="alsa::direct::pcm::MmapDir trait">MmapDir</a></div><div class="item-right docblock-short"><p>Dummy trait for better generics</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.MmapCapture.html" title="alsa::direct::pcm::MmapCapture type">MmapCapture</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.MmapPlayback.html" title="alsa::direct::pcm::MmapPlayback type">MmapPlayback</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="alsa" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
</body></html>